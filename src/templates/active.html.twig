{% extends "base.html.twig" %}
{% block title %}Active \ MVC-plum{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="/fg/css/active.css">
{% endblock %}

{% block body %}
<body>
    <div class="container">

        <div class="header">
            <div class="header-left">
                <div class="label">plum.active_users</div>
                <h1>Active <span>Users</span></h1>
                <div class="meta">Joined accounts · real-time view</div>
            </div>
            <div class="badge">LIVE DATA</div>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-label">Total Active</div>
                <div class="stat-value">{{ activeUsers | length }}</div>
            </div>
            <div class="stat">
                <div class="stat-label">Regions</div>
                <div class="stat-value">{{ regionCount }}</div>
            </div>
            <div class="stat">
                <div class="stat-label">Accounts</div>
                <div class="stat-value">{{ accountCount }}</div>
            </div>
        </div>

        <div class="table-wrapper">
            <div class="table-header-bar">
                <span class="table-title">User Records</span>
                <span class="source-tag">view: active_users</span>
            </div>

            {% if not activeUsers %}
                <div class="empty">
                    <div class="empty-icon">◎</div>
                    <div class="empty-text">No active users found</div>
                </div>
            {% else %}
                <table>
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Account</th>
                            <th>Region</th>
                            <th>Created At</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in activeUsers %}
                            <tr>
                                <td class="email">{{ user.email }}</td>
                                <td class="account">{{ user.account_name }}</td>
                                <td><span class="region-pill">{{ user.region }}</span></td>
                                <td class="date">{{ user.created_at }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        </div>

        <div class="footer">
            {{ "now" | date("Y-m-d H:i:s") }} UTC &nbsp;·&nbsp; MVC-plum · View
        </div>

    </div>
</body>
{% endblock %}
